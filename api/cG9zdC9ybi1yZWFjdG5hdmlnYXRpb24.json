{"title":"简单！轻松使用react-navigation","date":"2019-03-03T16:23:23.000Z","author":"James🐒","thumbnail":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562520566509&di=b84e74dec6b6b76ca9783b8f00b1daee&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01f4a158a5bf78a801219c775abd4e.jpg%401280w_1l_2o_100sh.png","link":"post/rn-reactnavigation","tags":["Hybrid"],"categories":["React Native"],"updated":"2019-07-07T14:45:11.697Z","content":"<p>当我自己在使用react-navigation时，我遇到一些问题，譬如如何使用它提供的抽屉视图？ 抽屉视图中，每一个列表前面的图标又该如何设置？再如怎么结合tabNavigator和drawerNavigator？</p>\n<p>  在这篇文章中，我给大家介绍下如何使用react-navigation中的，stackNavigator,switchNavigaotr,Drawernavigator,以及Tab Navigator，他们是怎么样结合在一起工作的。</p>\n<p>先给大家看看最终的效果图，然后我们再来一步一步实现。话不多说，Let’s dive in.</p>\n<div class=\"article-img\"><p><img src=\"https://user-gold-cdn.xitu.io/2019/7/7/16bcc56936e1a899?w=384&h=858&f=gif&s=243846\" alt data-zoomable></p></div>\n<p>效果就是如gif图所示，包含最基本的底部导航，正常的页面间导航，还有抽屉视图；在这个图里没有展示switchNavigator，这是用来切换根视图的，很简单，后面会讲到。一个一个来</p>\n<p>如果你直接想看项目代码，这是传送门：  </p>\n<p>项目地址：<a href=\"https://github.com/JamesInGod/react-navigation-example\" target=\"_blank\" rel=\"noopener\">传送门</a></p>\n<h3 id=\"堆栈视图-stacknavigator\">堆栈视图,stacknavigator<a href=\"post/rn-reactnavigation#堆栈视图-stacknavigator\"></a></h3><figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123;createStackNavigator&#125; from &apos;react-navigation&apos;;</span><br><span class=\"line\">import HomeDetailView from &apos;../../views/home/HomeDetailView&apos;</span><br><span class=\"line\">import HomeView from &apos;../../views/home/HomeView&apos;</span><br></pre></td></tr></table></div></figure>\n\n<p>引入所有你想放在主页堆栈视图的页面，注意路径是否正确  </p>\n<p>然后实现这个函数，创建<code>HomeViewStack</code>,在博文里我只放入了核心代码，具体项目中，我做了一些抽离，方便理解</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">createStackNavigator(&#123;</span><br><span class=\"line\">        HomeView: HomeView,</span><br><span class=\"line\">        HomeDetailView: HomeDetailView</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></div></figure>\n\n<p>再创建<code>DiscoverViewStack,MoreViewStack</code></p>\n<h3 id=\"抽屉视图，Drawer-Navigator\">抽屉视图，Drawer Navigator<a href=\"post/rn-reactnavigation#抽屉视图，Drawer-Navigator\"></a></h3><figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">createDrawerNavigator(</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            更多: &#123;</span><br><span class=\"line\">                screen: MoreViewStack,</span><br><span class=\"line\">                navigationOptions: () =&gt; (&#123;</span><br><span class=\"line\">                    drawerLabel: &apos;更多&apos;,</span><br><span class=\"line\">                    drawerIcon: (&#123; tintColor &#125;) =&gt; (</span><br><span class=\"line\">                        &lt;Ionicons name=&#123;&apos;ios-chatbubbles&apos;&#125; size=&#123;20&#125; color=&#123;tintColor&#125; /&gt;</span><br><span class=\"line\">                    )</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;),</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            关于: &#123;</span><br><span class=\"line\">                screen: AboutView,</span><br><span class=\"line\">                navigationOptions: &#123;</span><br><span class=\"line\">                    drawerLabel: &apos;关于&apos;,</span><br><span class=\"line\">                    drawerIcon: (&#123; tintColor &#125;) =&gt; (</span><br><span class=\"line\">                        &lt;Ionicons name=&#123;&apos;ios-navigate&apos;&#125; size=&#123;20&#125; color=&#123;tintColor&#125; /&gt;</span><br><span class=\"line\">                    )</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            contentComponent: CustomDrawerComponent,</span><br><span class=\"line\">            drawerWidth: 300,</span><br><span class=\"line\">            contentOptions: &#123;</span><br><span class=\"line\">                activeTintColor: &apos;#6F18F0&apos;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    )</span><br></pre></td></tr></table></div></figure>\n\n<p>这里，我直接将MoreViewStack 放入了抽屉视图，接着往下看，我会将stackNavigaotr，DrawerNavigator,tabNavigator结合一起使用</p>\n<h3 id=\"底部导航-Tab-Navigator\">底部导航,Tab Navigator<a href=\"post/rn-reactnavigation#底部导航-Tab-Navigator\"></a></h3><p>我们来看如何实现底部导航，tab navigator     </p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; createBottomTabNavigator &#125; from &apos;react-navigation&apos;;</span><br></pre></td></tr></table></div></figure>\n\n<p>然后实现这个叫做createBottomTabNavigator的函数</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">createBottomTabNavigator(</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            主页: HomeViewStack,</span><br><span class=\"line\">            发现: DiscoverViewStack,</span><br><span class=\"line\">            更多: DrawerNavigator</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">             defaultNavigationOptions: (&#123; navigation &#125;) =&gt; (&#123;</span><br><span class=\"line\">                tabBarIcon: (&#123; focused, horizontal, tintColor &#125;) =&gt; &#123;</span><br><span class=\"line\">                    const &#123; routeName &#125; = navigation.state;</span><br><span class=\"line\">                    let IconComponent = Ionicons;</span><br><span class=\"line\">                    let iconName;</span><br><span class=\"line\">                    if (routeName === &apos;主页&apos;) &#123;</span><br><span class=\"line\">                        iconName = `ios-navigate`;</span><br><span class=\"line\">                       return &lt;IconComponent name=&#123;iconName&#125; size=&#123;25&#125; color=&#123;tintColor&#125; /&gt;;</span><br><span class=\"line\">                    &#125; else if (routeName === &apos;发现&apos;) &#123;</span><br><span class=\"line\">                        iconName = `ios-chatbubbles`;</span><br><span class=\"line\">                        return &lt;IconComponent name=&#123;iconName&#125; size=&#123;25&#125; color=&#123;tintColor&#125; /&gt;;</span><br><span class=\"line\">                    &#125; else &#123;</span><br><span class=\"line\">                        iconName = `ios-more`;</span><br><span class=\"line\">                        return &lt;IconComponent name=&#123;iconName&#125; size=&#123;25&#125; color=&#123;tintColor&#125; /&gt;;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">            &#125;),</span><br><span class=\"line\">            tabBarOptions: &#123;</span><br><span class=\"line\">                activeTintColor: &apos;tomato&apos;,</span><br><span class=\"line\">                inactiveTintColor: &apos;gray&apos;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            initialRouteName: &quot;主页&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    )</span><br></pre></td></tr></table></div></figure>\n\n<p>核心代码，就是这样了。整体思路如下</p>\n<div class=\"article-img\"><p><img src=\"https://user-gold-cdn.xitu.io/2019/7/7/16bcc4c5fcd29598?w=871&h=343&f=png&s=28442\" alt data-zoomable></p></div>\n<p>完整的项目，我放在gayhub上，那里有详尽的代码，这篇博文提供了大致的思路，并没有非常详细的描述实现细节。如果看了项目代码还有不清楚的，请在gayhub上留言.</p>\n<p>项目地址：<a href=\"https://github.com/JamesInGod/react-navigation-example\" target=\"_blank\" rel=\"noopener\">传送门</a></p>\n<p>有什么不对的地方，也请大家指正，共同进步</p>\n","prev":{"title":"超简单！IOS，在App中使用Safari打开网页（swift）","link":"post/ios-safariview"},"next":{"title":"三步搞定！React Native 引用字体图标","link":"post/rn-iconfont"},"plink":"http://yoursite.com/post/rn-reactnavigation/"}